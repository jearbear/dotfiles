[alias]
    b = branch
    s = status
    l = log --oneline --graph master..

    ls = log --oneline --graph --since='1 month ago'

    ri = !git rebase --interactive $(git pick-branch)
    rim = rebase --interactive master

    co = checkout
    com = checkout master
    compt = checkout master-passing-tests
    cob = !git co $(git pick-branch)

    unstage = reset -q HEAD --
    recommit = commit --amend --no-edit
    uncommit = reset --soft HEAD^

    rev = !git revert $(git pick-commit)
    fix = !git commit -a --fixup $(git pick-commit)

    squash = !git reset --soft $(git pick-commit) && git commit && :
    squash-branch = !git squash $(git base)

    d = diff
    ds = diff HEAD
    db = !git diff $(git base)

    base = merge-base HEAD master
    head = rev-parse HEAD

    fpush = push --force-with-lease

    pick-commit = !"git log --oneline master..HEAD --color=always | fzf --reverse --ansi --preview='git show --color=always {1} --stat' --preview-window='70%' | cut -f 1 -d ' ' | tr -d '\n'"
    pick-branch = !"git branch | rg -v '^\\*' | awk '{$1=$1};1' | fzf --reverse --preview='git log --oneline master..{} --color=always' --preview-window='70%' | tr -d '\n'"

    get-branch = !git fetch origin ${1?}:${1?} && git checkout ${1?} && :
    diff-branch = !git diff --color=always \"${1?}\"..$(git merge-base \"${1?}\" master) && :
    stat-branch = !git diff --stat --color=always \"${1?}\"..$(git merge-base \"${1?}\" master) && :

[commit]
    gpgSign = true
    verbose = true

[color]
    ui = true

[color "diff-highlight"]
    oldNormal = red
    oldHighlight = red bold reverse
    newNormal = green
    newHighlight = green bold reverse

[color "diff"]
    meta = white
    frag = magenta bold
    old = red
    new = green
    whitespace = red reverse

[help]
    autocorrect = 1

[log]
    date = relative

[diff]
    algorithm = patience
    indentheuristic = true

[merge]
    conflictstyle = diff3
    tool = fugitive

[mergetool "fugitive"]
    cmd = nvim -f -c "Gdiff" "$MERGED"

[pager]
    diff = diff-so-fancy | less --tabs=4 -RFX

[pull]
    ff = only
    rebase = true

[push]
    default = current

[rebase]
    autostash = true
    autosquash = true

[stash]
    showPatch = true

[include]
    path = .gitconfig.local

[core]
    excludesfile = ~/.gitignore
